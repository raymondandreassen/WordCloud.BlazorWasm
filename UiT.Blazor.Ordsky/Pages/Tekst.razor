@page "/tekst"

<PageHeading Title="Ordsky" Heading="Din tekst for å bygge ordsky"></PageHeading>
<MudStack Style="width:100%; height:1000px">
    <MudTextField 
        @ref="multilineReference" 
        T="string" 
        Label="Kopier inn teksten din"
        Lines="45"
        Variant="Variant.Outlined" 
        Adornment="Adornment.End" 
        AdornmentIcon="@Icons.Material.Filled.Api" 
        OnAdornmentClick="@(() => multilineReference.SelectAsync())" 
        @bind-Value="Ordsky.Text"
        />
    <MudButton Variant="Variant.Outlined" Color="Color.Primary" FullWidth="true" Style="height:35px" OnClick="LoadWordList">Last inn i ordlisten</MudButton>
</MudStack>

<MudOverlay Visible="@IsProcessing"></MudOverlay>


@code
{
    [Inject] Components.MyOrdsky Ordsky { get; set; } = null!;
    private MudTextField<string> multilineReference;
    private bool IsProcessing = false;

    private void LoadWordList()
    {
        IsProcessing = true;
        this.StateHasChanged();
        Components.MyOrdskyProcessor.Process(Ordsky);
        IsProcessing = false;
        this.StateHasChanged();
    }
}